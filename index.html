<!DOCTYPE html>
<html lang="ko" class="dark scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>쇼츠투벤츠 3기: 무료 강의 20251214</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            bg: '#0f172a', /* Slate 900 - Deeper dark */
                            card: '#1e293b', /* Slate 800 */
                            text: '#f1f5f9', /* Slate 100 */
                            muted: '#94a3b8', /* Slate 400 */
                            border: '#334155' /* Slate 700 */
                        },
                        // 5 Core Colors for Emphasis
                        brand: '#6366f1',   // Indigo (Primary)
                        money: '#10b981',   // Emerald (Revenue/Success)
                        tech: '#3b82f6',    // Blue (AI/Tools)
                        risk: '#f43f5e',    // Rose (Warning/Risk)
                        point: '#f59e0b',   // Amber (Highlight/Key)
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Noto Sans KR', sans-serif;
        }

        /* Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
            max-height: 350px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        /* Tab Active State */
        .tab-btn.active {
            border-bottom: 2px solid #6366f1;
            color: #6366f1;
            font-weight: 700;
        }

        /* Step Line */
        .step-line {
            position: absolute;
            left: 23px;
            top: 40px;
            bottom: 0;
            width: 2px;
            background-color: #334155;
            z-index: 0;
        }

        /* Smooth scroll margin */
        section {
            scroll-margin-top: 140px;
        }

        /* Accordion Transition */
        .accordion-content {
            transition: max-height 0.3s ease-out;
            max-height: 0;
            overflow: hidden;
        }

        .accordion-content.open {
            max-height: 2000px;
        }

        .accordion-icon {
            transition: transform 0.3s ease;
        }

        .accordion-btn[aria-expanded="true"] .accordion-icon {
            transform: rotate(180deg);
        }

        /* Drag & Drop */
        .draggable-item.dragging {
            opacity: 0.5;
            border: 2px dashed #6366f1;
        }
    </style>
</head>

<body
    class="bg-gray-50 text-gray-900 dark:bg-dark-bg dark:text-dark-text transition-colors duration-300 h-screen flex overflow-hidden selection:bg-red-100 selection:text-red-900">

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal"
        class="fixed inset-0 bg-black/70 z-[60] hidden flex items-center justify-center backdrop-blur-sm">
        <div
            class="bg-white dark:bg-dark-card rounded-xl p-6 shadow-2xl max-w-sm w-full mx-4 border border-gray-200 dark:border-gray-700">
            <div class="text-center">
                <div
                    class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 mb-4">
                    <i class="fas fa-exclamation-triangle text-risk text-xl"></i>
                </div>
                <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100 mb-2">강의 삭제</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">
                    선택한 강의를 정말 삭제하시겠습니까?<br>이 작업은 되돌릴 수 없습니다.
                </p>
                <div class="flex space-x-3 justify-center">
                    <button onclick="closeDeleteModal()"
                        class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg text-sm font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">취소</button>
                    <button id="confirm-delete-btn"
                        class="px-4 py-2 bg-risk text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors shadow-md">삭제하기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Header -->
    <div
        class="md:hidden fixed top-0 w-full bg-white dark:bg-dark-card z-50 border-b border-gray-200 dark:border-dark-border flex justify-between items-center p-4">
        <h1 class="text-lg font-bold text-brand">쇼츠투벤츠 3기</h1>
        <div class="flex items-center space-x-3">
            <button onclick="toggleDarkMode()" class="p-2 text-gray-600 dark:text-gray-300"><i
                    class="fas fa-sun"></i></button>
            <button id="mobile-menu-btn" class="text-gray-600 dark:text-gray-300"><i
                    class="fas fa-bars text-xl"></i></button>
        </div>
    </div>

    <!-- Sidebar -->
    <aside id="sidebar"
        class="fixed inset-y-0 left-0 bg-white dark:bg-dark-card w-72 border-r border-gray-200 dark:border-dark-border transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-40 flex flex-col pt-16 md:pt-0">
        <div class="p-6 border-b border-gray-100 dark:border-dark-border">
            <h1 class="text-2xl font-bold text-brand">쇼츠투벤츠 <span class="text-gray-900 dark:text-white">3기</span></h1>
        </div>

        <div class="p-4 flex-1 overflow-y-auto">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-xs font-semibold text-gray-400 dark:text-dark-muted uppercase tracking-wider">내 강의실</h2>
                <button class="text-xs text-brand hover:text-indigo-400" title="강의 추가"><i
                        class="fas fa-plus"></i></button>
            </div>

            <!-- Draggable Course List -->
            <ul class="space-y-2" id="course-list">
                <!-- Free Course Item -->
                <li class="group relative draggable-item" draggable="true" data-id="course-free">
                    <div id="sidebar-course-free"
                        class="w-full text-left px-4 py-3 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 text-brand font-medium flex items-center justify-between cursor-pointer hover:shadow-sm transition-all"
                        onclick="showHome()">
                        <span class="flex items-center truncate flex-1 mr-2 course-title">
                            <i
                                class="fas fa-grip-vertical mr-2 text-gray-400 cursor-move opacity-0 group-hover:opacity-100 drag-handle hover:text-gray-600"></i>
                            <i class="fas fa-play-circle mr-3 flex-shrink-0"></i>
                            <span class="text-content">무료 강의 20251214</span>
                        </span>
                        <div class="flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="editCourseTitle(this, event)" class="p-1 text-gray-400 hover:text-brand"
                                title="이름 변경"><i class="fas fa-pen text-xs"></i></button>
                            <button onclick="openDeleteModal(this)" class="p-1 text-gray-400 hover:text-risk"
                                title="삭제"><i class="fas fa-trash text-xs"></i></button>
                        </div>
                    </div>
                </li>

                <!-- Regular Course Item -->
                <li class="group relative draggable-item" draggable="true" data-id="course-regular-1">
                    <div id="sidebar-course-regular"
                        class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium flex items-center justify-between cursor-pointer border border-transparent transition-all"
                        onclick="loadLecture()">
                        <span class="flex items-center truncate flex-1 mr-2 course-title">
                            <i
                                class="fas fa-grip-vertical mr-2 text-gray-400 cursor-move opacity-0 group-hover:opacity-100 drag-handle hover:text-gray-600"></i>
                            <i class="fas fa-chalkboard-teacher mr-3 flex-shrink-0 text-brand"></i>
                            <span class="text-content">정규강의 1강 251217</span>
                        </span>
                        <div class="flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="editCourseTitle(this, event)" class="p-1 text-gray-400 hover:text-brand"
                                title="이름 변경"><i class="fas fa-pen text-xs"></i></button>
                            <button onclick="openDeleteModal(this)" class="p-1 text-gray-400 hover:text-risk"
                                title="삭제"><i class="fas fa-trash text-xs"></i></button>
                        </div>
                    </div>
                </li>

                <!-- Guerrilla Course Item -->
                <li class="group relative draggable-item" draggable="true" data-id="course-guerrilla-1">
                    <div id="sidebar-course-guerrilla-1"
                        class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium flex items-center justify-between cursor-pointer border border-transparent transition-all"
                        onclick="loadGuerrillaLecture()">
                        <span class="flex items-center truncate flex-1 mr-2 course-title">
                            <i
                                class="fas fa-grip-vertical mr-2 text-gray-400 cursor-move opacity-0 group-hover:opacity-100 drag-handle hover:text-gray-600"></i>
                            <i class="fas fa-bolt mr-3 flex-shrink-0 text-brand"></i>
                            <span class="text-content">게릴라 특강 1강 251218</span>
                        </span>
                        <div class="flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="editCourseTitle(this, event)" class="p-1 text-gray-400 hover:text-brand"
                                title="이름 변경"><i class="fas fa-pen text-xs"></i></button>
                            <button onclick="openDeleteModal(this)" class="p-1 text-gray-400 hover:text-risk"
                                title="삭제"><i class="fas fa-trash text-xs"></i></button>
                        </div>
                    </div>
                </li>

                <!-- Shorts Explosion Course Item -->
                <li class="group relative draggable-item" draggable="true" data-id="course-shorts-explosion-1">
                    <div id="sidebar-course-shorts-explosion-1"
                        class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium flex items-center justify-between cursor-pointer border border-transparent transition-all"
                        onclick="loadShortsExplosionLecture()">
                        <span class="flex items-center truncate flex-1 mr-2 course-title">
                            <i
                                class="fas fa-grip-vertical mr-2 text-gray-400 cursor-move opacity-0 group-hover:opacity-100 drag-handle hover:text-gray-600"></i>
                            <i class="fas fa-bomb mr-3 flex-shrink-0 text-brand"></i>
                            <span class="text-content">쇼츠대폭발 특강 1강 251213</span>
                        </span>
                        <div class="flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="editCourseTitle(this, event)" class="p-1 text-gray-400 hover:text-brand"
                                title="이름 변경"><i class="fas fa-pen text-xs"></i></button>
                            <button onclick="openDeleteModal(this)" class="p-1 text-gray-400 hover:text-risk"
                                title="삭제"><i class="fas fa-trash text-xs"></i></button>
                        </div>
                    </div>
                </li>

                <!-- Guerrilla Course 2 Item -->
                <li class="group relative draggable-item" draggable="true" data-id="course-guerrilla-2">
                    <div id="sidebar-course-guerrilla-2"
                        class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium flex items-center justify-between cursor-pointer border border-transparent transition-all"
                        onclick="loadGuerrillaLecture2()">
                        <span class="flex items-center truncate flex-1 mr-2 course-title">
                            <i
                                class="fas fa-grip-vertical mr-2 text-gray-400 cursor-move opacity-0 group-hover:opacity-100 drag-handle hover:text-gray-600"></i>
                            <i class="fas fa-bolt mr-3 flex-shrink-0 text-brand"></i>
                            <span class="text-content">게릴라 특강 2강 20251219</span>
                        </span>
                        <div class="flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="editCourseTitle(this, event)" class="p-1 text-gray-400 hover:text-brand"
                                title="이름 변경"><i class="fas fa-pen text-xs"></i></button>
                            <button onclick="openDeleteModal(this)" class="p-1 text-gray-400 hover:text-risk"
                                title="삭제"><i class="fas fa-trash text-xs"></i></button>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 ml-0 md:ml-72 flex flex-col h-full relative" id="main-scroll-container">
        <!-- Desktop Header -->
        <header
            class="hidden md:flex justify-between items-center px-8 py-4 bg-white dark:bg-dark-card border-b border-gray-200 dark:border-dark-border">
            <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100" id="header-title">무료 강의 20251214</h2>
            <button onclick="toggleDarkMode()"
                class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition-colors">
                <i class="fas fa-moon dark:hidden"></i>
                <i class="fas fa-sun hidden dark:inline text-point"></i>
                <span class="ml-2 text-sm font-medium">테마 변경</span>
            </button>
        </header>

        <!-- Tabs Navigation -->
        <!-- Tabs Navigation Wrapper -->
        <div id="nav-container">
            <!-- Home Nav -->
            <nav id="home-nav"
                class="bg-white dark:bg-dark-card border-b border-gray-200 dark:border-dark-border px-4 md:px-8 pt-4 sticky top-0 z-30 shadow-sm overflow-x-auto">
                <div class="flex space-x-8 min-w-max">
                    <a href="#section-dashboard" class="tab-btn active pb-4 text-sm font-medium transition-colors"
                        data-target="section-dashboard">대시보드 & 마인드셋</a>
                    <a href="#section-strategy"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="section-strategy">7단계 수익화 프로세스</a>
                    <a href="#section-ai-engine"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="section-ai-engine">AI 생산성 엔진</a>
                    <a href="#section-expansion"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="section-expansion">확장 및 수익화</a>
                    <a href="#section-community"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="section-community">커뮤니티 & 비전</a>
                </div>
            </nav>

            <!-- Lecture Nav (Hidden by default) -->
            <nav id="lecture-nav"
                class="hidden bg-white dark:bg-dark-card border-b border-gray-200 dark:border-dark-border px-4 md:px-8 pt-4 sticky top-0 z-30 shadow-sm overflow-x-auto">
                <div class="flex space-x-8 min-w-max" id="lecture-nav-links">
                    <!-- Dynamic Links will be inserted here or static placeholders -->
                    <a href="#mindset"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="mindset">마인드셋</a>
                    <a href="#tools"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="tools">AI 툴</a>
                    <a href="#workflow"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="workflow">워크플로우</a>
                    <a href="#policy"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="policy">정책 & 전략</a>
                    <a href="#cases"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="cases">사례 연구</a>
                </div>
            </nav>
        </div>

        <!-- Content Area -->
        <!-- Content Area -->
        <div class="flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-8 scroll-smooth" id="content-area">

            <!-- Home View Wrapper -->
            <div id="home-view">
            </div> <!-- End Home View -->

            <!-- Lecture View Wrapper -->
            <div id="lecture-view" class="hidden space-y-8 max-w-5xl mx-auto pb-24">

                <div id="lecture-content" class="space-y-12">
                    <!-- Dynamic Content Will Be Loaded Here -->
                </div>
            </div>

        </div>

        <!-- Scroll to Top Button -->
        <button id="scroll-top-btn" onclick="scrollToTop()"
            class="fixed bottom-8 right-8 bg-red-500 text-white w-14 h-14 rounded-full shadow-xl hover:bg-red-600 transition-all duration-300 transform translate-y-20 opacity-0 z-50 flex items-center justify-center border-2 border-white dark:border-gray-800">
            <i class="fas fa-arrow-up text-xl"></i>
        </button>
    </main>

    <script>
        // -- Drag & Drop and Sidebar Management --
        const courseList = document.getElementById('course-list');

        function initDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable-item');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', () => {
                    draggable.classList.add('opacity-50');
                    draggable.classList.add('dragging');
                });

                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('opacity-50');
                    draggable.classList.remove('dragging');
                    saveSidebarState();
                });
            });

            courseList.addEventListener('dragover', e => {
                e.preventDefault();
                const afterElement = getDragAfterElement(courseList, e.clientY);
                const draggable = document.querySelector('.dragging');
                if (afterElement == null) {
                    courseList.appendChild(draggable);
                } else {
                    courseList.insertBefore(draggable, afterElement);
                }
            });
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.draggable-item:not(.dragging)')];

            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function saveSidebarState() {
            const items = [];
            document.querySelectorAll('#course-list .draggable-item').forEach(item => {
                const textSpan = item.querySelector('.text-content');
                items.push({
                    id: item.dataset.id,
                    title: textSpan.innerText
                });
            });
            localStorage.setItem('sidebarState', JSON.stringify(items));
        }

        function loadSidebarState() {
            const saved = localStorage.getItem('sidebarState');
            if (saved) {
                const items = JSON.parse(saved);
                // We have the order in `items`. 
                // We need to re-append existing elements in that order.
                items.forEach(itemData => {
                    const el = document.querySelector(`.draggable-item[data-id="${itemData.id}"]`);
                    if (el) {
                        // Restore title
                        const textSpan = el.querySelector('.text-content');
                        if (textSpan) textSpan.innerText = itemData.title;
                        // Appending moves it to the bottom, so doing this in order sorts them
                        courseList.appendChild(el);
                    }
                });
            }
        }

        // -- Course Title Management --
        let targetDeleteElement = null;

        function editCourseTitle(btn, event) {
            event.stopPropagation(); // Stop click from triggering course load
            const container = btn.closest('.w-full');
            const textSpan = container.querySelector('.text-content');
            const li = btn.closest('li');

            if (textSpan.isContentEditable) {
                textSpan.contentEditable = "false";
                textSpan.classList.remove('border', 'border-brand', 'bg-white', 'dark:bg-gray-800', 'px-1', 'rounded', 'z-50', 'relative');
                li.setAttribute('draggable', 'true'); // Re-enable drag
                btn.innerHTML = '<i class="fas fa-pen text-xs"></i>';

                // Save Title Change
                saveSidebarState();

                // Update header if active
                if (container.id === 'sidebar-course-free' && document.getElementById('home-view').classList.contains('hidden') === false) {
                    document.getElementById('header-title').innerText = textSpan.innerText;
                } else if (container.id === 'sidebar-course-regular' && document.getElementById('lecture-view').classList.contains('hidden') === false) {
                    document.getElementById('header-title').innerText = textSpan.innerText;
                }

            } else {
                textSpan.contentEditable = "true";
                textSpan.classList.add('border', 'border-brand', 'bg-white', 'dark:bg-gray-800', 'px-1', 'rounded', 'z-50', 'relative');
                li.setAttribute('draggable', 'false'); // Disable drag while editing text
                textSpan.focus();
                btn.innerHTML = '<i class="fas fa-check text-xs text-money"></i>';

                // Keydown handler for Enter
                textSpan.onkeydown = function (e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        editCourseTitle(btn, e);
                    }
                };

                // Click outside to save
                const outsideClickListener = (e) => {
                    // Check if click is outside textSpan AND outside the edit button
                    if (!textSpan.contains(e.target) && !btn.contains(e.target)) {
                        if (textSpan.isContentEditable) editCourseTitle(btn, e);
                        document.removeEventListener('click', outsideClickListener);
                    }
                };
                // Timeout to avoid immediate trigger
                setTimeout(() => document.addEventListener('click', outsideClickListener), 0);
            }
        }

        function openDeleteModal(btn) {
            event.stopPropagation();
            const li = btn.closest('li');
            targetDeleteElement = li;
            document.getElementById('delete-modal').classList.remove('hidden');
        }

        function closeDeleteModal() {
            document.getElementById('delete-modal').classList.add('hidden');
            targetDeleteElement = null;
        }

        document.getElementById('confirm-delete-btn').addEventListener('click', () => {
            if (targetDeleteElement) {
                targetDeleteElement.remove();
                saveSidebarState(); // Save deletion state
                closeDeleteModal();
            }
        });

        document.getElementById('delete-modal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('delete-modal')) {
                closeDeleteModal();
            }
        });

        // -- Accordion Logic --
        function toggleAccordion(btn) {
            const content = btn.nextElementSibling;
            const expanded = btn.getAttribute('aria-expanded') === 'true';

            if (!expanded) {
                content.classList.add('open');
                btn.setAttribute('aria-expanded', 'true');
            } else {
                content.classList.remove('open');
                btn.setAttribute('aria-expanded', 'false');
            }
        }

        // -- Scroll Spy & Scroll to Top --
        const contentArea = document.getElementById('content-area');
        const scrollTopBtn = document.getElementById('scroll-top-btn');

        // General Click Handler for Smooth Scrolling
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('tab-btn')) {
                e.preventDefault();
                const targetId = e.target.getAttribute('href').substring(1);
                const targetEl = document.getElementById(targetId);
                if (targetEl) {
                    contentArea.scrollTo({
                        top: targetEl.offsetTop - contentArea.offsetTop - 20,
                        behavior: 'smooth'
                    });
                }
            }
        });

        contentArea.addEventListener('scroll', () => {
            if (contentArea.scrollTop > 300) {
                scrollTopBtn.classList.remove('translate-y-20', 'opacity-0');
            } else {
                scrollTopBtn.classList.add('translate-y-20', 'opacity-0');
            }

            // Detect visible section based on active view
            const isHome = !document.getElementById('home-view').classList.contains('hidden');
            const activeContainer = isHome ? document.getElementById('home-view') : document.getElementById('lecture-content');

            // Find sections within active container. 
            // For Home: <section> tags. For Lecture: We will use divs with IDs lecture-part-N
            const sections = activeContainer.querySelectorAll('section, div[id^="lecture-part-"]');

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - contentArea.offsetTop;
                if (contentArea.scrollTop >= sectionTop - 150) {
                    current = section.getAttribute('id');
                }
            });

            // Update active link in the visible nav
            const visibleNav = isHome ? document.getElementById('home-nav') : document.getElementById('lecture-nav');
            if (!visibleNav) return;
            const navLinks = visibleNav.querySelectorAll('.tab-btn');

            navLinks.forEach(link => {
                link.classList.remove('active', 'text-brand', 'border-brand', 'border-b-2');
                link.classList.add('text-gray-500', 'dark:text-dark-muted'); // Reset to default

                // Style adjustment for active state
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active', 'text-brand', 'border-brand', 'border-b-2');
                    link.classList.remove('text-gray-500', 'dark:text-dark-muted');
                } else {
                    link.style.borderBottom = 'none';
                }
            });
        });

        function scrollToTop() {
            contentArea.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // -- Dark Mode --
        function toggleDarkMode() {
            const html = document.documentElement;
            const isDark = html.classList.toggle('dark');
            updateChartTheme(isDark);
        }

        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        });

        // -- Chart.js Global Vars --
        let revenueChartInstance = null;
        let efficiencyChartInstance = null;
        let isEfficiencyMode = false;
        let homeContentLoaded = false;

        function updateChartTheme(isDark) {
            const textColor = isDark ? '#f1f5f9' : '#1f2937';
            const gridColor = isDark ? '#334155' : '#e5e7eb';

            [revenueChartInstance, efficiencyChartInstance].forEach(chart => {
                if (!chart) return;
                chart.options.scales.x.grid.color = gridColor;
                chart.options.scales.x.ticks.color = textColor;
                if (chart.options.scales.y) {
                    chart.options.scales.y.grid.color = gridColor;
                    chart.options.scales.y.ticks.color = textColor;
                }
                chart.update();
            });
        }

        // -- Lecture Loading Logic --
        function updateSidebarSelection(activeId) {
            // Generalize the selection logic to work with any ID in the sidebar
            document.querySelectorAll('#course-list > li > div').forEach(el => {
                const isSelected = (el.id === activeId);

                if (isSelected) {
                    el.classList.add('bg-indigo-50', 'dark:bg-indigo-900/20', 'border-indigo-200', 'dark:border-indigo-800', 'text-brand', 'shadow-sm');
                    el.classList.remove('hover:bg-gray-50', 'dark:hover:bg-gray-800', 'text-gray-700', 'dark:text-gray-300', 'border-transparent');
                } else {
                    el.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-800', 'text-gray-700', 'dark:text-gray-300', 'border-transparent');
                    el.classList.remove('bg-indigo-50', 'dark:bg-indigo-900/20', 'border-indigo-200', 'dark:border-indigo-800', 'text-brand', 'shadow-sm');
                }
            });
        }

        async function showHome() {
            document.getElementById('home-view').classList.remove('hidden');
            document.getElementById('lecture-view').classList.add('hidden');
            document.getElementById('home-nav').classList.remove('hidden');
            document.getElementById('lecture-nav').classList.add('hidden');

            // Set Header Title from sidebar current state
            const sidebarItem = document.getElementById('sidebar-course-free');
            if (sidebarItem) {
                document.getElementById('header-title').innerText = sidebarItem.querySelector('.text-content').innerText;
            }

            updateSidebarSelection('sidebar-course-free');

            const container = document.getElementById('home-view');
            // Check if already loaded
            if (!homeContentLoaded) {
                container.innerHTML = '<div class="text-center py-20"><i class="fas fa-spinner fa-spin text-4xl text-brand mb-4"></i><p class="text-gray-500">강의 내용을 불러오는 중입니다...</p></div>';

                try {
                    const response = await fetch('pages/home.html');
                    if (!response.ok) throw new Error('데이터 로드 실패');
                    const html = await response.text();
                    container.innerHTML = html;
                    homeContentLoaded = true;

                    // Init Charts
                    initHomeCharts();
                } catch (e) {
                    console.error(e);
                    container.innerHTML = `
                        <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center">
                            <i class="fas fa-exclamation-triangle text-risk text-3xl mb-3"></i>
                            <h3 class="text-lg font-bold text-red-800 dark:text-red-200 mb-2">데이터 로드 실패</h3>
                            <p class="text-sm text-red-600 dark:text-red-300 mb-4">${e.message}</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">
                                로컬에서 실행 중이라면 보안 정책(CORS) 때문일 수 있습니다.<br>
                                폴더 내 <strong>'start_server.bat'</strong>를 더블 클릭하여 실행한 뒤 접속해 보세요.
                            </p>
                        </div>
                    `;
                }
            }
        }

        async function loadLecture() {
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('lecture-view').classList.remove('hidden');
            document.getElementById('home-nav').classList.add('hidden');
            document.getElementById('lecture-nav').classList.remove('hidden');

            // Restore default links for regular lecture
            document.getElementById('lecture-nav-links').innerHTML = `
                <a href="#mindset" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="mindset">마인드셋</a>
                <a href="#tools" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="tools">AI 툴</a>
                <a href="#workflow" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="workflow">워크플로우</a>
                <a href="#policy" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="policy">정책 & 전략</a>
                <a href="#cases" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="cases">사례 연구</a>
            `;

            const sidebarItem = document.getElementById('sidebar-course-regular');
            if (sidebarItem) {
                document.getElementById('header-title').innerText = sidebarItem.querySelector('.text-content').innerText;
            }

            updateSidebarSelection('sidebar-course-regular');

            const container = document.getElementById('lecture-content');
            // Assuming this generic container handles different lectures, we should clear it or check content ID?
            // For now, let's just clear and reload to be safe if switching between different lectures
            // Or better, check if we are already viewing THIS lecture specifically. 
            // Simplified: Just overwrite for now to ensure correct content.

            container.innerHTML = '<div class="text-center py-20"><i class="fas fa-spinner fa-spin text-4xl text-brand mb-4"></i><p class="text-gray-500">강의 데이터를 불러오는 중입니다...</p></div>';

            try {
                const response = await fetch('pages/lecture1.html');
                if (!response.ok) throw new Error('데이터 로드 실패');
                const html = await response.text();
                container.innerHTML = html;

                // Initialize Lecture Interactive Elements
                setTimeout(() => {
                    if (typeof initLectureScripts === 'function') {
                        initLectureScripts();
                    }
                }, 100);

            } catch (e) {
                console.error(e);
                container.innerHTML = `
                    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center">
                        <i class="fas fa-exclamation-triangle text-risk text-3xl mb-3"></i>
                        <h3 class="text-lg font-bold text-red-800 dark:text-red-200 mb-2">데이터 로드 실패</h3>
                        <p class="text-sm text-red-600 dark:text-red-300 mb-4">${e.message}</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">
                            로컬에서 실행 중이라면 보안 정책(CORS) 때문일 수 있습니다.<br>
                            폴더 내 <strong>'start_server.bat'</strong>를 더블 클릭하여 실행한 뒤 접속해 보세요.
                        </p>
                    </div>
                `;
            }
        }

        async function loadGuerrillaLecture() {
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('lecture-view').classList.remove('hidden');
            document.getElementById('home-nav').classList.add('hidden');
            // Guerrilla lecture might utilize the lecture nav or a new one. For now, hide lecture nav or reuse?
            // Since it's a different structure, maybe hide lecture-nav or create a simple one.
            // Let's hide the lecture-nav for now as guerrila1.html doesn't seem to have the same #mindset, #tools anchors aligned with that nav.
            document.getElementById('lecture-nav').classList.add('hidden');

            const sidebarItem = document.getElementById('sidebar-course-guerrilla-1');
            if (sidebarItem) {
                document.getElementById('header-title').innerText = sidebarItem.querySelector('.text-content').innerText;
            }

            updateSidebarSelection('sidebar-course-guerrilla-1');

            const container = document.getElementById('lecture-content');
            container.innerHTML = '<div class="text-center py-20"><i class="fas fa-spinner fa-spin text-4xl text-brand mb-4"></i><p class="text-gray-500">게릴라 강의를 불러오는 중입니다...</p></div>';

            try {
                const response = await fetch('pages/guerrilla1.html');
                if (!response.ok) throw new Error('데이터 로드 실패');
                const html = await response.text();
                container.innerHTML = html;

            } catch (e) {
                console.error(e);
                container.innerHTML = `
                    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center">
                        <i class="fas fa-exclamation-triangle text-risk text-3xl mb-3"></i>
                        <h3 class="text-lg font-bold text-red-800 dark:text-red-200 mb-2">데이터 로드 실패</h3>
                        <p class="text-sm text-red-600 dark:text-red-300 mb-4">${e.message}</p>
                    </div>
                `;
            }
        }

        async function loadShortsExplosionLecture() {
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('lecture-view').classList.remove('hidden');
            document.getElementById('home-nav').classList.add('hidden');
            document.getElementById('lecture-nav').classList.remove('hidden');

            // Set links for Shorts Explosion lecture
            document.getElementById('lecture-nav-links').innerHTML = `
                <a href="#shorts-core" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="shorts-core">핵심 철학</a>
                <a href="#shorts-sourcing" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="shorts-sourcing">소재 분석</a>
                <a href="#shorts-content" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="shorts-content">대본 설계</a>
                <a href="#shorts-production" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="shorts-production">제작 과정</a>
                <a href="#shorts-mastery" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="shorts-mastery">인사이트</a>
            `;

            const sidebarItem = document.getElementById('sidebar-course-shorts-explosion-1');
            if (sidebarItem) {
                document.getElementById('header-title').innerText = sidebarItem.querySelector('.text-content').innerText;
            }

            updateSidebarSelection('sidebar-course-shorts-explosion-1');

            const container = document.getElementById('lecture-content');
            container.innerHTML = '<div class="text-center py-20"><i class="fas fa-spinner fa-spin text-4xl text-brand mb-4"></i><p class="text-gray-500">쇼츠대폭발 특강을 불러오는 중입니다...</p></div>';

            try {
                const response = await fetch('pages/shorts_explosion_1.html');
                if (!response.ok) throw new Error('데이터 로드 실패');
                const html = await response.text();
                container.innerHTML = html;

            } catch (e) {
                console.error(e);
                container.innerHTML = `
                    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center">
                        <i class="fas fa-exclamation-triangle text-risk text-3xl mb-3"></i>
                        <h3 class="text-lg font-bold text-red-800 dark:text-red-200 mb-2">데이터 로드 실패</h3>
                        <p class="text-sm text-red-600 dark:text-red-300 mb-4">${e.message}</p>
                    </div>
                `;
            }
        }

        async function loadGuerrillaLecture2() {
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('lecture-view').classList.remove('hidden');
            document.getElementById('home-nav').classList.add('hidden');
            document.getElementById('lecture-nav').classList.remove('hidden');

            // Set links for Guerrilla Lecture 2
            document.getElementById('lecture-nav-links').innerHTML = `
                <a href="#guerrilla-intro" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="guerrilla-intro">핵심 철학</a>
                <a href="#guerrilla-quantity" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="guerrilla-quantity">양적 승부</a>
                <a href="#guerrilla-ai" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="guerrilla-ai">AI 워크플로우</a>
                <a href="#guerrilla-message" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="guerrilla-message">메시지 & 중복</a>
                <a href="#guerrilla-cases" class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors" data-target="guerrilla-cases">성공 사례</a>
            `;

            const sidebarItem = document.getElementById('sidebar-course-guerrilla-2');
            if (sidebarItem) {
                document.getElementById('header-title').innerText = sidebarItem.querySelector('.text-content').innerText;
            }

            updateSidebarSelection('sidebar-course-guerrilla-2');

            const container = document.getElementById('lecture-content');
            container.innerHTML = '<div class="text-center py-20"><i class="fas fa-spinner fa-spin text-4xl text-brand mb-4"></i><p class="text-gray-500">게릴라 2강을 불러오는 중입니다...</p></div>';

            try {
                const response = await fetch('pages/guerrilla_2.html');
                if (!response.ok) throw new Error('데이터 로드 실패');
                const html = await response.text();
                container.innerHTML = html;

            } catch (e) {
                console.error(e);
                container.innerHTML = `
                    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center">
                        <i class="fas fa-exclamation-triangle text-risk text-3xl mb-3"></i>
                        <h3 class="text-lg font-bold text-red-800 dark:text-red-200 mb-2">데이터 로드 실패</h3>
                        <p class="text-sm text-red-600 dark:text-red-300 mb-4">${e.message}</p>
                    </div>
                `;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadSidebarState();
            initDragAndDrop();
            showHome();
        });

        function initHomeCharts() {
            const isDark = document.documentElement.classList.contains('dark');
            const textColor = isDark ? '#f1f5f9' : '#1f2937';
            const gridColor = isDark ? '#334155' : '#e5e7eb';

            const bucket1 = document.getElementById('revenueChart');
            if (bucket1) {
                const ctxRevenue = bucket1.getContext('2d');
                revenueChartInstance = new Chart(ctxRevenue, {
                    type: 'line',
                    data: {
                        labels: ['1개월', '2개월', '3개월', '4개월', '5개월'],
                        datasets: [{
                            label: '월 수익 (만원)',
                            data: [7, 100, 1000, 3400, 10000],
                            borderColor: '#6366f1',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            borderWidth: 3,
                            pointBackgroundColor: '#fff',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: { beginAtZero: true, grid: { color: gridColor }, ticks: { color: textColor } },
                            x: { grid: { display: false }, ticks: { color: textColor } }
                        }
                    }
                });
            }

            const bucket2 = document.getElementById('efficiencyChart');
            if (bucket2) {
                const ctxEfficiency = bucket2.getContext('2d');
                efficiencyChartInstance = new Chart(ctxEfficiency, {
                    type: 'bar',
                    data: {
                        labels: ['제작 시간 (분)'],
                        datasets: [
                            { label: '일반', data: [240], backgroundColor: '#94a3b8', borderRadius: 6 },
                            { label: 'AI 워크플로우', data: [0], backgroundColor: '#6366f1', borderRadius: 6 }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        scales: {
                            x: { beginAtZero: true, max: 250, grid: { color: gridColor }, ticks: { color: textColor } },
                            y: { grid: { display: false }, ticks: { color: textColor } }
                        },
                        plugins: { legend: { labels: { color: textColor } } }
                    }
                });
            }
        }

        function toggleEfficiencyMode() {
            if (!efficiencyChartInstance) return;

            const btn = document.getElementById('efficiency-btn');
            const text = document.getElementById('efficiency-text');

            if (!isEfficiencyMode) {
                efficiencyChartInstance.data.datasets[1].data = [15];
                efficiencyChartInstance.update();
                btn.innerText = "초기화";
                btn.classList.add('bg-brand', 'text-white');
                text.innerHTML = '<strong class="text-brand">AI 혁명:</strong> 4시간 -> <strong>15분</strong> (1600% 향상)';
            } else {
                efficiencyChartInstance.data.datasets[1].data = [0];
                efficiencyChartInstance.update();
                btn.innerText = "AI 모드 켜기";
                btn.classList.remove('bg-brand', 'text-white');
                text.innerHTML = '전통적 방식: 기획~편집 4시간 소요';
            }
            isEfficiencyMode = !isEfficiencyMode;
        }

        // --- Lecture Page Interactive Scripts ---
        const toolData = {
            claude: {
                title: "Claude (클로드)",
                role: "Brain (서브 작가)",
                desc: "단순 요청이 아닌, 구체적인 지침서(페르소나)를 부여하여 인간적인 글쓰기, 기획, 분석을 담당합니다. 대본 분석 및 지침서 제작에 탁월합니다.",
                strategy: "기승전결 구조, 후킹 요소, 말투 특징 등을 분석하여 '나만의 지침서'를 만드는 것이 핵심입니다.",
                tip: "💡 Tip: '분석해줘' -> '지침서 만들어줘' 2단계를 거치세요."
            },
            opal: {
                title: "Opal (오팔)",
                role: "Structure (구조화)",
                desc: "저비용 고효율 핵심 툴. 대본을 넣으면 [이미지 + 스크립트 + 행동 지문]이 포함된 스토리보드를 자동 생성합니다.",
                strategy: "오팔로 가성비 있게 시드머니를 만든 후, 고비용 툴로 넘어가는 것이 전략입니다.",
                tip: "💡 Tip: 모바일 최적화 및 대량 생산 가능. 실사는 스케치형으로 뽑고 변환하세요."
            },
            genspark: {
                title: "Genspark (젠스파크)",
                role: "Quality (올인원)",
                desc: "고품질 영상/이미지 생성 및 팩트 체크가 가능한 올인원 툴입니다. 비용이 높습니다.",
                strategy: "수익화 이후 확장 단계에서 사용하거나, AI 드라이브 기능을 활용해 퀄리티를 높일 때 사용합니다.",
                tip: "💡 Tip: 초기 진입장벽이 높으므로 나중에 도입하세요."
            },
            groq: {
                title: "Groq (그록)",
                role: "Visualization (영상화)",
                desc: "오팔에서 생성한 이미지를 기반으로 빠르게 영상을 생성해주는 툴입니다.",
                strategy: "오팔과 연동하여 스토리보드를 실제 움직이는 영상으로 빠르게 시각화합니다.",
                tip: "💡 Tip: 오팔에서 제공한 행동 지문을 그대로 입력하세요."
            }
        };

        const workflowSteps = {
            1: {
                title: "STEP 1: 기획 및 대본 분석",
                tool: "Tool: Claude",
                actions: [
                    "✅ 성공한 채널(예: 억만장자 스토리) 벤치마킹",
                    "✅ '픽셀링' 등으로 자막 데이터 추출",
                    "✅ Claude에게 기승전결, 후킹, 감정선 분석 요청",
                    "✅ <strong>나만의 지침서(프롬프트) 제작</strong>"
                ],
                tips: "\"이 분석 결과를 바탕으로, 앞으로 이런 스타일의 글을 써주는 AI 서브 작가 지침서를 만들어줘\"라고 요청하여 나만의 도구를 만드세요."
            },
            2: {
                title: "STEP 2: 스토리보드 생성",
                tool: "Tool: Opal",
                actions: [
                    "✅ Claude가 작성한 대본을 Opal에 입력",
                    "✅ 그림체 선택 (인물형, 스케치형 등)",
                    "✅ <strong>스토리보드 자동 생성</strong> (이미지+지문)",
                    "✅ 여러 창을 띄워 대량 생산 (생산성 극대화)"
                ],
                tips: "실사 인물 생성 시 초상권 문제가 생길 수 있습니다. '스케치형'으로 생성 후 믹스보드 등에서 실사화하는 우회 전략을 사용하세요."
            },
            3: {
                title: "STEP 3: 영상화 및 음성 생성",
                tool: "Tool: Groq & Typecast",
                actions: [
                    "✅ Opal 이미지를 Groq에 넣어 영상 변환",
                    "✅ Opal 행동 지문을 Groq 프롬프트로 입력",
                    "✅ Typecast로 고품질 AI 음성 생성",
                    "✅ 속도 조절 (감동 1.1배속, 정보 1.2배속)"
                ],
                tips: "AI가 영상을 생성하는 동안 멍하니 기다리지 마세요(클멍 금지). 이 시간에 음성 파일을 만들거나 다음 대본을 준비하세요."
            },
            4: {
                title: "STEP 4: 편집 및 디테일",
                tool: "Tool: CapCut",
                actions: [
                    "✅ 영상 소스와 음성 파일 배치",
                    "✅ 자막(SRT) 파일 불러오기 및 싱크 조절",
                    "✅ 폰트(도연체) 및 가독성 디자인 적용",
                    "✅ <strong>키프레임</strong>으로 카메라 무빙 효과 추가"
                ],
                tips: "AI가 만든 영상에 오류가 있다면 수정하려 애쓰지 말고, 비슷한 이미지로 다시 생성하거나 해당 컷을 잘라내는 것이 빠릅니다."
            }
        };

        function updateToolDetail(toolKey) {
            const data = toolData[toolKey];
            const titleEl = document.getElementById('detail-title');
            if (!titleEl) return;

            titleEl.innerText = data.title;
            document.getElementById('detail-desc').innerHTML = data.desc;
            document.getElementById('detail-strategy').innerText = data.strategy;
            document.getElementById('detail-tip').innerText = data.tip;
        }

        function showWorkflowStep(stepNum) {
            const data = workflowSteps[stepNum];
            const titleEl = document.getElementById('wf-title');
            if (!titleEl) return;

            titleEl.innerText = data.title;
            document.getElementById('wf-tool').innerText = data.tool;

            const actionsList = document.getElementById('wf-actions');
            actionsList.innerHTML = '';
            data.actions.forEach(action => {
                const li = document.createElement('li');
                li.innerHTML = action;
                actionsList.appendChild(li);
            });

            document.getElementById('wf-tips').innerText = data.tips;

            // Visual feedback for stepper
            document.querySelectorAll('.step-card').forEach((card, index) => {
                if (index + 1 === stepNum) {
                    card.classList.add('border-indigo-500', 'ring-2', 'ring-indigo-100', 'dark:ring-indigo-900');
                    card.classList.remove('border-gray-100', 'dark:border-gray-700');
                } else {
                    card.classList.remove('border-indigo-500', 'ring-2', 'ring-indigo-100', 'dark:ring-indigo-900');
                    card.classList.add('border-gray-100', 'dark:border-gray-700');
                }
            });
        }

        function initLectureScripts() {
            console.log("Initializing Lecture Scripts");

            // 1. Radar Chart
            const ctx = document.getElementById('toolRadarChart');
            if (ctx) {
                // Destroy old instance if exists to prevent layering (though simpler here to just create new if null)
                // Since page reloads chart usually, it's fine.

                const isDark = document.documentElement.classList.contains('dark');
                const textColor = isDark ? '#f1f5f9' : '#1f2937';
                const gridColor = isDark ? '#334155' : '#e5e7eb';
                const backdropColor = isDark ? 'rgba(30, 41, 59, 0.8)' : 'rgba(255, 255, 255, 0.8)';

                new Chart(ctx.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: ['비용 효율성', '제작 속도', '퀄리티', '초보자 접근성', '자율성'],
                        datasets: [
                            {
                                label: 'Opal (오팔)',
                                data: [90, 85, 70, 90, 60],
                                fill: true,
                                backgroundColor: 'rgba(99, 102, 241, 0.2)', // Indigo
                                borderColor: '#6366f1',
                                pointBackgroundColor: '#6366f1',
                                pointBorderColor: '#fff',
                            },
                            {
                                label: 'Genspark',
                                data: [40, 70, 95, 60, 80],
                                fill: true,
                                backgroundColor: 'rgba(244, 63, 94, 0.2)', // Rose
                                borderColor: '#f43f5e',
                                pointBackgroundColor: '#f43f5e',
                                pointBorderColor: '#fff',
                            }
                        ]
                    },
                    options: {
                        maintainAspectRatio: false,
                        responsive: true,
                        elements: {
                            line: { borderWidth: 3 }
                        },
                        scales: {
                            r: {
                                grid: { color: gridColor },
                                angleLines: { color: gridColor },
                                pointLabels: { color: textColor, font: { size: 12 } },
                                ticks: { display: false, backdropColor: backdropColor },
                                suggestedMin: 0,
                                suggestedMax: 100
                            }
                        },
                        plugins: {
                            legend: { labels: { color: textColor } }
                        }
                    }
                });
            }

            // 2. Initialize Workflow
            showWorkflowStep(1);
        }
    </script>
</body>

</html>
<!DOCTYPE html>
<html lang="ko" class="dark scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‡¼ì¸ íˆ¬ë²¤ì¸  3ê¸°: ë¬´ë£Œ ê°•ì˜ 20251214</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            bg: '#0f172a', /* Slate 900 - Deeper dark */
                            card: '#1e293b', /* Slate 800 */
                            text: '#f1f5f9', /* Slate 100 */
                            muted: '#94a3b8', /* Slate 400 */
                            border: '#334155' /* Slate 700 */
                        },
                        // 5 Core Colors for Emphasis
                        brand: '#6366f1',   // Indigo (Primary)
                        money: '#10b981',   // Emerald (Revenue/Success)
                        tech: '#3b82f6',    // Blue (AI/Tools)
                        risk: '#f43f5e',    // Rose (Warning/Risk)
                        point: '#f59e0b',   // Amber (Highlight/Key)
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Noto Sans KR', sans-serif;
        }

        /* Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
            max-height: 350px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        /* Tab Active State */
        .tab-btn.active {
            border-bottom: 2px solid #6366f1;
            color: #6366f1;
            font-weight: 700;
        }

        /* Step Line */
        .step-line {
            position: absolute;
            left: 23px;
            top: 40px;
            bottom: 0;
            width: 2px;
            background-color: #334155;
            z-index: 0;
        }

        /* Smooth scroll margin */
        section {
            scroll-margin-top: 140px;
        }

        /* Accordion Transition */
        .accordion-content {
            transition: max-height 0.3s ease-out;
            max-height: 0;
            overflow: hidden;
        }

        .accordion-content.open {
            max-height: 2000px;
        }

        .accordion-icon {
            transition: transform 0.3s ease;
        }

        .accordion-btn[aria-expanded="true"] .accordion-icon {
            transform: rotate(180deg);
        }

        /* Drag & Drop */
        .draggable-item.dragging {
            opacity: 0.5;
            border: 2px dashed #6366f1;
        }
    </style>
</head>

<body
    class="bg-gray-50 text-gray-900 dark:bg-dark-bg dark:text-dark-text transition-colors duration-300 h-screen flex overflow-hidden selection:bg-red-100 selection:text-red-900">

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal"
        class="fixed inset-0 bg-black/70 z-[60] hidden flex items-center justify-center backdrop-blur-sm">
        <div
            class="bg-white dark:bg-dark-card rounded-xl p-6 shadow-2xl max-w-sm w-full mx-4 border border-gray-200 dark:border-gray-700">
            <div class="text-center">
                <div
                    class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 mb-4">
                    <i class="fas fa-exclamation-triangle text-risk text-xl"></i>
                </div>
                <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100 mb-2">ê°•ì˜ ì‚­ì œ</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-6">
                    ì„ íƒí•œ ê°•ì˜ë¥¼ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?<br>ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                </p>
                <div class="flex space-x-3 justify-center">
                    <button onclick="closeDeleteModal()"
                        class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg text-sm font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">ì·¨ì†Œ</button>
                    <button id="confirm-delete-btn"
                        class="px-4 py-2 bg-risk text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors shadow-md">ì‚­ì œí•˜ê¸°</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Header -->
    <div
        class="md:hidden fixed top-0 w-full bg-white dark:bg-dark-card z-50 border-b border-gray-200 dark:border-dark-border flex justify-between items-center p-4">
        <h1 class="text-lg font-bold text-brand">ì‡¼ì¸ íˆ¬ë²¤ì¸  3ê¸°</h1>
        <div class="flex items-center space-x-3">
            <button onclick="toggleDarkMode()" class="p-2 text-gray-600 dark:text-gray-300"><i
                    class="fas fa-sun"></i></button>
            <button id="mobile-menu-btn" class="text-gray-600 dark:text-gray-300"><i
                    class="fas fa-bars text-xl"></i></button>
        </div>
    </div>

    <!-- Sidebar -->
    <aside id="sidebar"
        class="fixed inset-y-0 left-0 bg-white dark:bg-dark-card w-72 border-r border-gray-200 dark:border-dark-border transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-40 flex flex-col pt-16 md:pt-0">
        <div class="p-6 border-b border-gray-100 dark:border-dark-border">
            <h1 class="text-2xl font-bold text-brand">ì‡¼ì¸ íˆ¬ë²¤ì¸  <span class="text-gray-900 dark:text-white">3ê¸°</span></h1>
        </div>

        <div class="p-4 flex-1 overflow-y-auto">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-xs font-semibold text-gray-400 dark:text-dark-muted uppercase tracking-wider">ë‚´ ê°•ì˜ì‹¤</h2>
                <button class="text-xs text-brand hover:text-indigo-400" title="ê°•ì˜ ì¶”ê°€"><i
                        class="fas fa-plus"></i></button>
            </div>

            <!-- Draggable Course List -->
            <ul class="space-y-2" id="course-list">
                <!-- Free Course Item -->
                <li class="group relative draggable-item" draggable="true" data-id="course-free">
                    <div id="sidebar-course-free"
                        class="w-full text-left px-4 py-3 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 text-brand font-medium flex items-center justify-between cursor-pointer hover:shadow-sm transition-all"
                        onclick="showHome()">
                        <span class="flex items-center truncate flex-1 mr-2 course-title">
                            <i
                                class="fas fa-grip-vertical mr-2 text-gray-400 cursor-move opacity-0 group-hover:opacity-100 drag-handle hover:text-gray-600"></i>
                            <i class="fas fa-play-circle mr-3 flex-shrink-0"></i>
                            <span class="text-content">ë¬´ë£Œ ê°•ì˜ 20251214</span>
                        </span>
                        <div class="flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="editCourseTitle(this, event)" class="p-1 text-gray-400 hover:text-brand"
                                title="ì´ë¦„ ë³€ê²½"><i class="fas fa-pen text-xs"></i></button>
                            <button onclick="openDeleteModal(this)" class="p-1 text-gray-400 hover:text-risk"
                                title="ì‚­ì œ"><i class="fas fa-trash text-xs"></i></button>
                        </div>
                    </div>
                </li>

                <!-- Regular Course Item -->
                <li class="group relative draggable-item" draggable="true" data-id="course-regular-1">
                    <div id="sidebar-course-regular"
                        class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium flex items-center justify-between cursor-pointer border border-transparent transition-all"
                        onclick="loadLecture()">
                        <span class="flex items-center truncate flex-1 mr-2 course-title">
                            <i
                                class="fas fa-grip-vertical mr-2 text-gray-400 cursor-move opacity-0 group-hover:opacity-100 drag-handle hover:text-gray-600"></i>
                            <i class="fas fa-chalkboard-teacher mr-3 flex-shrink-0 text-brand"></i>
                            <span class="text-content">ì •ê·œê°•ì˜ 1ê°• 251217</span>
                        </span>
                        <div class="flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="editCourseTitle(this, event)" class="p-1 text-gray-400 hover:text-brand"
                                title="ì´ë¦„ ë³€ê²½"><i class="fas fa-pen text-xs"></i></button>
                            <button onclick="openDeleteModal(this)" class="p-1 text-gray-400 hover:text-risk"
                                title="ì‚­ì œ"><i class="fas fa-trash text-xs"></i></button>
                        </div>
                    </div>
                </li>

                <!-- Guerrilla Course Item -->
                <li class="group relative draggable-item" draggable="true" data-id="course-guerrilla-1">
                    <div id="sidebar-course-guerrilla-1"
                        class="w-full text-left px-4 py-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium flex items-center justify-between cursor-pointer border border-transparent transition-all"
                        onclick="loadGuerrillaLecture()">
                        <span class="flex items-center truncate flex-1 mr-2 course-title">
                            <i
                                class="fas fa-grip-vertical mr-2 text-gray-400 cursor-move opacity-0 group-hover:opacity-100 drag-handle hover:text-gray-600"></i>
                            <i class="fas fa-bolt mr-3 flex-shrink-0 text-brand"></i>
                            <span class="text-content">ê²Œë¦´ë¼ íŠ¹ê°• 1ê°• 251218</span>
                        </span>
                        <div class="flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button onclick="editCourseTitle(this, event)" class="p-1 text-gray-400 hover:text-brand"
                                title="ì´ë¦„ ë³€ê²½"><i class="fas fa-pen text-xs"></i></button>
                            <button onclick="openDeleteModal(this)" class="p-1 text-gray-400 hover:text-risk"
                                title="ì‚­ì œ"><i class="fas fa-trash text-xs"></i></button>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 ml-0 md:ml-72 flex flex-col h-full relative" id="main-scroll-container">
        <!-- Desktop Header -->
        <header
            class="hidden md:flex justify-between items-center px-8 py-4 bg-white dark:bg-dark-card border-b border-gray-200 dark:border-dark-border">
            <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100" id="header-title">ë¬´ë£Œ ê°•ì˜ 20251214</h2>
            <button onclick="toggleDarkMode()"
                class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 transition-colors">
                <i class="fas fa-moon dark:hidden"></i>
                <i class="fas fa-sun hidden dark:inline text-point"></i>
                <span class="ml-2 text-sm font-medium">í…Œë§ˆ ë³€ê²½</span>
            </button>
        </header>

        <!-- Tabs Navigation -->
        <!-- Tabs Navigation Wrapper -->
        <div id="nav-container">
            <!-- Home Nav -->
            <nav id="home-nav"
                class="bg-white dark:bg-dark-card border-b border-gray-200 dark:border-dark-border px-4 md:px-8 pt-4 sticky top-0 z-30 shadow-sm overflow-x-auto">
                <div class="flex space-x-8 min-w-max">
                    <a href="#section-dashboard" class="tab-btn active pb-4 text-sm font-medium transition-colors"
                        data-target="section-dashboard">ëŒ€ì‹œë³´ë“œ & ë§ˆì¸ë“œì…‹</a>
                    <a href="#section-strategy"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="section-strategy">7ë‹¨ê³„ ìˆ˜ìµí™” í”„ë¡œì„¸ìŠ¤</a>
                    <a href="#section-ai-engine"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="section-ai-engine">AI ìƒì‚°ì„± ì—”ì§„</a>
                    <a href="#section-expansion"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="section-expansion">í™•ì¥ ë° ìˆ˜ìµí™”</a>
                    <a href="#section-community"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="section-community">ì»¤ë®¤ë‹ˆí‹° & ë¹„ì „</a>
                </div>
            </nav>

            <!-- Lecture Nav (Hidden by default) -->
            <nav id="lecture-nav"
                class="hidden bg-white dark:bg-dark-card border-b border-gray-200 dark:border-dark-border px-4 md:px-8 pt-4 sticky top-0 z-30 shadow-sm overflow-x-auto">
                <div class="flex space-x-8 min-w-max" id="lecture-nav-links">
                    <!-- Dynamic Links will be inserted here or static placeholders -->
                    <a href="#mindset"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="mindset">ë§ˆì¸ë“œì…‹</a>
                    <a href="#tools"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="tools">AI íˆ´</a>
                    <a href="#workflow"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="workflow">ì›Œí¬í”Œë¡œìš°</a>
                    <a href="#policy"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="policy">ì •ì±… & ì „ëµ</a>
                    <a href="#cases"
                        class="tab-btn pb-4 text-sm font-medium text-gray-500 dark:text-dark-muted hover:text-gray-700 dark:hover:text-gray-200 transition-colors"
                        data-target="cases">ì‚¬ë¡€ ì—°êµ¬</a>
                </div>
            </nav>
        </div>

        <!-- Content Area -->
        <!-- Content Area -->
        <div class="flex-1 overflow-y-auto overflow-x-hidden p-4 md:p-8 scroll-smooth" id="content-area">

            <!-- Home View Wrapper -->
            <div id="home-view">
            </div> <!-- End Home View -->

            <!-- Lecture View Wrapper -->
            <div id="lecture-view" class="hidden space-y-8 max-w-5xl mx-auto pb-24">

                <div id="lecture-content" class="space-y-12">
                    <!-- Dynamic Content Will Be Loaded Here -->
                </div>
            </div>

        </div>

        <!-- Scroll to Top Button -->
        <button id="scroll-top-btn" onclick="scrollToTop()"
            class="fixed bottom-8 right-8 bg-red-500 text-white w-14 h-14 rounded-full shadow-xl hover:bg-red-600 transition-all duration-300 transform translate-y-20 opacity-0 z-50 flex items-center justify-center border-2 border-white dark:border-gray-800">
            <i class="fas fa-arrow-up text-xl"></i>
        </button>
    </main>

    <script>
        // -- Drag & Drop and Sidebar Management --
        const courseList = document.getElementById('course-list');

        function initDragAndDrop() {
            const draggables = document.querySelectorAll('.draggable-item');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', () => {
                    draggable.classList.add('opacity-50');
                    draggable.classList.add('dragging');
                });

                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('opacity-50');
                    draggable.classList.remove('dragging');
                    saveSidebarState();
                });
            });

            courseList.addEventListener('dragover', e => {
                e.preventDefault();
                const afterElement = getDragAfterElement(courseList, e.clientY);
                const draggable = document.querySelector('.dragging');
                if (afterElement == null) {
                    courseList.appendChild(draggable);
                } else {
                    courseList.insertBefore(draggable, afterElement);
                }
            });
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.draggable-item:not(.dragging)')];

            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function saveSidebarState() {
            const items = [];
            document.querySelectorAll('#course-list .draggable-item').forEach(item => {
                const textSpan = item.querySelector('.text-content');
                items.push({
                    id: item.dataset.id,
                    title: textSpan.innerText
                });
            });
            localStorage.setItem('sidebarState', JSON.stringify(items));
        }

        function loadSidebarState() {
            const saved = localStorage.getItem('sidebarState');
            if (saved) {
                const items = JSON.parse(saved);
                // We have the order in `items`. 
                // We need to re-append existing elements in that order.
                items.forEach(itemData => {
                    const el = document.querySelector(`.draggable-item[data-id="${itemData.id}"]`);
                    if (el) {
                        // Restore title
                        const textSpan = el.querySelector('.text-content');
                        if (textSpan) textSpan.innerText = itemData.title;
                        // Appending moves it to the bottom, so doing this in order sorts them
                        courseList.appendChild(el);
                    }
                });
            }
        }

        // -- Course Title Management --
        let targetDeleteElement = null;

        function editCourseTitle(btn, event) {
            event.stopPropagation(); // Stop click from triggering course load
            const container = btn.closest('.w-full');
            const textSpan = container.querySelector('.text-content');
            const li = btn.closest('li');

            if (textSpan.isContentEditable) {
                textSpan.contentEditable = "false";
                textSpan.classList.remove('border', 'border-brand', 'bg-white', 'dark:bg-gray-800', 'px-1', 'rounded', 'z-50', 'relative');
                li.setAttribute('draggable', 'true'); // Re-enable drag
                btn.innerHTML = '<i class="fas fa-pen text-xs"></i>';

                // Save Title Change
                saveSidebarState();

                // Update header if active
                if (container.id === 'sidebar-course-free' && document.getElementById('home-view').classList.contains('hidden') === false) {
                    document.getElementById('header-title').innerText = textSpan.innerText;
                } else if (container.id === 'sidebar-course-regular' && document.getElementById('lecture-view').classList.contains('hidden') === false) {
                    document.getElementById('header-title').innerText = textSpan.innerText;
                }

            } else {
                textSpan.contentEditable = "true";
                textSpan.classList.add('border', 'border-brand', 'bg-white', 'dark:bg-gray-800', 'px-1', 'rounded', 'z-50', 'relative');
                li.setAttribute('draggable', 'false'); // Disable drag while editing text
                textSpan.focus();
                btn.innerHTML = '<i class="fas fa-check text-xs text-money"></i>';

                // Keydown handler for Enter
                textSpan.onkeydown = function (e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        editCourseTitle(btn, e);
                    }
                };

                // Click outside to save
                const outsideClickListener = (e) => {
                    // Check if click is outside textSpan AND outside the edit button
                    if (!textSpan.contains(e.target) && !btn.contains(e.target)) {
                        if (textSpan.isContentEditable) editCourseTitle(btn, e);
                        document.removeEventListener('click', outsideClickListener);
                    }
                };
                // Timeout to avoid immediate trigger
                setTimeout(() => document.addEventListener('click', outsideClickListener), 0);
            }
        }

        function openDeleteModal(btn) {
            event.stopPropagation();
            const li = btn.closest('li');
            targetDeleteElement = li;
            document.getElementById('delete-modal').classList.remove('hidden');
        }

        function closeDeleteModal() {
            document.getElementById('delete-modal').classList.add('hidden');
            targetDeleteElement = null;
        }

        document.getElementById('confirm-delete-btn').addEventListener('click', () => {
            if (targetDeleteElement) {
                targetDeleteElement.remove();
                saveSidebarState(); // Save deletion state
                closeDeleteModal();
            }
        });

        document.getElementById('delete-modal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('delete-modal')) {
                closeDeleteModal();
            }
        });

        // -- Accordion Logic --
        function toggleAccordion(btn) {
            const content = btn.nextElementSibling;
            const expanded = btn.getAttribute('aria-expanded') === 'true';

            if (!expanded) {
                content.classList.add('open');
                btn.setAttribute('aria-expanded', 'true');
            } else {
                content.classList.remove('open');
                btn.setAttribute('aria-expanded', 'false');
            }
        }

        // -- Scroll Spy & Scroll to Top --
        const contentArea = document.getElementById('content-area');
        const scrollTopBtn = document.getElementById('scroll-top-btn');

        // General Click Handler for Smooth Scrolling
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('tab-btn')) {
                e.preventDefault();
                const targetId = e.target.getAttribute('href').substring(1);
                const targetEl = document.getElementById(targetId);
                if (targetEl) {
                    contentArea.scrollTo({
                        top: targetEl.offsetTop - contentArea.offsetTop - 20,
                        behavior: 'smooth'
                    });
                }
            }
        });

        contentArea.addEventListener('scroll', () => {
            if (contentArea.scrollTop > 300) {
                scrollTopBtn.classList.remove('translate-y-20', 'opacity-0');
            } else {
                scrollTopBtn.classList.add('translate-y-20', 'opacity-0');
            }

            // Detect visible section based on active view
            const isHome = !document.getElementById('home-view').classList.contains('hidden');
            const activeContainer = isHome ? document.getElementById('home-view') : document.getElementById('lecture-content');

            // Find sections within active container. 
            // For Home: <section> tags. For Lecture: We will use divs with IDs lecture-part-N
            const sections = activeContainer.querySelectorAll('section, div[id^="lecture-part-"]');

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - contentArea.offsetTop;
                if (contentArea.scrollTop >= sectionTop - 150) {
                    current = section.getAttribute('id');
                }
            });

            // Update active link in the visible nav
            const visibleNav = isHome ? document.getElementById('home-nav') : document.getElementById('lecture-nav');
            if (!visibleNav) return;
            const navLinks = visibleNav.querySelectorAll('.tab-btn');

            navLinks.forEach(link => {
                link.classList.remove('active', 'text-brand', 'border-brand', 'border-b-2');
                link.classList.add('text-gray-500', 'dark:text-dark-muted'); // Reset to default

                // Style adjustment for active state
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active', 'text-brand', 'border-brand', 'border-b-2');
                    link.classList.remove('text-gray-500', 'dark:text-dark-muted');
                } else {
                    link.style.borderBottom = 'none';
                }
            });
        });

        function scrollToTop() {
            contentArea.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // -- Dark Mode --
        function toggleDarkMode() {
            const html = document.documentElement;
            const isDark = html.classList.toggle('dark');
            updateChartTheme(isDark);
        }

        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        });

        // -- Chart.js Global Vars --
        let revenueChartInstance = null;
        let efficiencyChartInstance = null;
        let isEfficiencyMode = false;
        let homeContentLoaded = false;

        function updateChartTheme(isDark) {
            const textColor = isDark ? '#f1f5f9' : '#1f2937';
            const gridColor = isDark ? '#334155' : '#e5e7eb';

            [revenueChartInstance, efficiencyChartInstance].forEach(chart => {
                if (!chart) return;
                chart.options.scales.x.grid.color = gridColor;
                chart.options.scales.x.ticks.color = textColor;
                if (chart.options.scales.y) {
                    chart.options.scales.y.grid.color = gridColor;
                    chart.options.scales.y.ticks.color = textColor;
                }
                chart.update();
            });
        }

        // -- Lecture Loading Logic --
        function updateSidebarSelection(activeId) {
            // Generalize the selection logic to work with any ID in the sidebar
            document.querySelectorAll('#course-list > li > div').forEach(el => {
                const isSelected = (el.id === activeId);

                if (isSelected) {
                    el.classList.add('bg-indigo-50', 'dark:bg-indigo-900/20', 'border-indigo-200', 'dark:border-indigo-800', 'text-brand', 'shadow-sm');
                    el.classList.remove('hover:bg-gray-50', 'dark:hover:bg-gray-800', 'text-gray-700', 'dark:text-gray-300', 'border-transparent');
                } else {
                    el.classList.add('hover:bg-gray-50', 'dark:hover:bg-gray-800', 'text-gray-700', 'dark:text-gray-300', 'border-transparent');
                    el.classList.remove('bg-indigo-50', 'dark:bg-indigo-900/20', 'border-indigo-200', 'dark:border-indigo-800', 'text-brand', 'shadow-sm');
                }
            });
        }

        async function showHome() {
            document.getElementById('home-view').classList.remove('hidden');
            document.getElementById('lecture-view').classList.add('hidden');
            document.getElementById('home-nav').classList.remove('hidden');
            document.getElementById('lecture-nav').classList.add('hidden');

            // Set Header Title from sidebar current state
            const sidebarItem = document.getElementById('sidebar-course-free');
            if (sidebarItem) {
                document.getElementById('header-title').innerText = sidebarItem.querySelector('.text-content').innerText;
            }

            updateSidebarSelection('sidebar-course-free');

            const container = document.getElementById('home-view');
            // Check if already loaded
            if (!homeContentLoaded) {
                container.innerHTML = '<div class="text-center py-20"><i class="fas fa-spinner fa-spin text-4xl text-brand mb-4"></i><p class="text-gray-500">ê°•ì˜ ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p></div>';

                try {
                    const response = await fetch('pages/home.html');
                    if (!response.ok) throw new Error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                    const html = await response.text();
                    container.innerHTML = html;
                    homeContentLoaded = true;

                    // Init Charts
                    initHomeCharts();
                } catch (e) {
                    console.error(e);
                    container.innerHTML = `
                        <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center">
                            <i class="fas fa-exclamation-triangle text-risk text-3xl mb-3"></i>
                            <h3 class="text-lg font-bold text-red-800 dark:text-red-200 mb-2">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</h3>
                            <p class="text-sm text-red-600 dark:text-red-300 mb-4">${e.message}</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">
                                ë¡œì»¬ì—ì„œ ì‹¤í–‰ ì¤‘ì´ë¼ë©´ ë³´ì•ˆ ì •ì±…(CORS) ë•Œë¬¸ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                                í´ë” ë‚´ <strong>'start_server.bat'</strong>ë¥¼ ë”ë¸” í´ë¦­í•˜ì—¬ ì‹¤í–‰í•œ ë’¤ ì ‘ì†í•´ ë³´ì„¸ìš”.
                            </p>
                        </div>
                    `;
                }
            }
        }

        async function loadLecture() {
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('lecture-view').classList.remove('hidden');
            document.getElementById('home-nav').classList.add('hidden');
            document.getElementById('lecture-nav').classList.remove('hidden');

            const sidebarItem = document.getElementById('sidebar-course-regular');
            if (sidebarItem) {
                document.getElementById('header-title').innerText = sidebarItem.querySelector('.text-content').innerText;
            }

            updateSidebarSelection('sidebar-course-regular');

            const container = document.getElementById('lecture-content');
            // Assuming this generic container handles different lectures, we should clear it or check content ID?
            // For now, let's just clear and reload to be safe if switching between different lectures
            // Or better, check if we are already viewing THIS lecture specifically. 
            // Simplified: Just overwrite for now to ensure correct content.

            container.innerHTML = '<div class="text-center py-20"><i class="fas fa-spinner fa-spin text-4xl text-brand mb-4"></i><p class="text-gray-500">ê°•ì˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p></div>';

            try {
                const response = await fetch('pages/lecture1.html');
                if (!response.ok) throw new Error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                const html = await response.text();
                container.innerHTML = html;

                // Initialize Lecture Interactive Elements
                setTimeout(() => {
                    if (typeof initLectureScripts === 'function') {
                        initLectureScripts();
                    }
                }, 100);

            } catch (e) {
                console.error(e);
                container.innerHTML = `
                    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center">
                        <i class="fas fa-exclamation-triangle text-risk text-3xl mb-3"></i>
                        <h3 class="text-lg font-bold text-red-800 dark:text-red-200 mb-2">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</h3>
                        <p class="text-sm text-red-600 dark:text-red-300 mb-4">${e.message}</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">
                            ë¡œì»¬ì—ì„œ ì‹¤í–‰ ì¤‘ì´ë¼ë©´ ë³´ì•ˆ ì •ì±…(CORS) ë•Œë¬¸ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                            í´ë” ë‚´ <strong>'start_server.bat'</strong>ë¥¼ ë”ë¸” í´ë¦­í•˜ì—¬ ì‹¤í–‰í•œ ë’¤ ì ‘ì†í•´ ë³´ì„¸ìš”.
                        </p>
                    </div>
                `;
            }
        }

        async function loadGuerrillaLecture() {
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('lecture-view').classList.remove('hidden');
            document.getElementById('home-nav').classList.add('hidden');
            // Guerrilla lecture might utilize the lecture nav or a new one. For now, hide lecture nav or reuse?
            // Since it's a different structure, maybe hide lecture-nav or create a simple one.
            // Let's hide the lecture-nav for now as guerrila1.html doesn't seem to have the same #mindset, #tools anchors aligned with that nav.
            document.getElementById('lecture-nav').classList.add('hidden');

            const sidebarItem = document.getElementById('sidebar-course-guerrilla-1');
            if (sidebarItem) {
                document.getElementById('header-title').innerText = sidebarItem.querySelector('.text-content').innerText;
            }

            updateSidebarSelection('sidebar-course-guerrilla-1');

            const container = document.getElementById('lecture-content');
            container.innerHTML = '<div class="text-center py-20"><i class="fas fa-spinner fa-spin text-4xl text-brand mb-4"></i><p class="text-gray-500">ê²Œë¦´ë¼ ê°•ì˜ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p></div>';

            try {
                const response = await fetch('pages/guerrilla1.html');
                if (!response.ok) throw new Error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                const html = await response.text();
                container.innerHTML = html;

            } catch (e) {
                console.error(e);
                container.innerHTML = `
                    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-6 text-center">
                        <i class="fas fa-exclamation-triangle text-risk text-3xl mb-3"></i>
                        <h3 class="text-lg font-bold text-red-800 dark:text-red-200 mb-2">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</h3>
                        <p class="text-sm text-red-600 dark:text-red-300 mb-4">${e.message}</p>
                    </div>
                `;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadSidebarState();
            initDragAndDrop();
            showHome();
        });

        function initHomeCharts() {
            const isDark = document.documentElement.classList.contains('dark');
            const textColor = isDark ? '#f1f5f9' : '#1f2937';
            const gridColor = isDark ? '#334155' : '#e5e7eb';

            const bucket1 = document.getElementById('revenueChart');
            if (bucket1) {
                const ctxRevenue = bucket1.getContext('2d');
                revenueChartInstance = new Chart(ctxRevenue, {
                    type: 'line',
                    data: {
                        labels: ['1ê°œì›”', '2ê°œì›”', '3ê°œì›”', '4ê°œì›”', '5ê°œì›”'],
                        datasets: [{
                            label: 'ì›” ìˆ˜ìµ (ë§Œì›)',
                            data: [7, 100, 1000, 3400, 10000],
                            borderColor: '#6366f1',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            borderWidth: 3,
                            pointBackgroundColor: '#fff',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: { beginAtZero: true, grid: { color: gridColor }, ticks: { color: textColor } },
                            x: { grid: { display: false }, ticks: { color: textColor } }
                        }
                    }
                });
            }

            const bucket2 = document.getElementById('efficiencyChart');
            if (bucket2) {
                const ctxEfficiency = bucket2.getContext('2d');
                efficiencyChartInstance = new Chart(ctxEfficiency, {
                    type: 'bar',
                    data: {
                        labels: ['ì œì‘ ì‹œê°„ (ë¶„)'],
                        datasets: [
                            { label: 'ì¼ë°˜', data: [240], backgroundColor: '#94a3b8', borderRadius: 6 },
                            { label: 'AI ì›Œí¬í”Œë¡œìš°', data: [0], backgroundColor: '#6366f1', borderRadius: 6 }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        scales: {
                            x: { beginAtZero: true, max: 250, grid: { color: gridColor }, ticks: { color: textColor } },
                            y: { grid: { display: false }, ticks: { color: textColor } }
                        },
                        plugins: { legend: { labels: { color: textColor } } }
                    }
                });
            }
        }

        function toggleEfficiencyMode() {
            if (!efficiencyChartInstance) return;

            const btn = document.getElementById('efficiency-btn');
            const text = document.getElementById('efficiency-text');

            if (!isEfficiencyMode) {
                efficiencyChartInstance.data.datasets[1].data = [15];
                efficiencyChartInstance.update();
                btn.innerText = "ì´ˆê¸°í™”";
                btn.classList.add('bg-brand', 'text-white');
                text.innerHTML = '<strong class="text-brand">AI í˜ëª…:</strong> 4ì‹œê°„ -> <strong>15ë¶„</strong> (1600% í–¥ìƒ)';
            } else {
                efficiencyChartInstance.data.datasets[1].data = [0];
                efficiencyChartInstance.update();
                btn.innerText = "AI ëª¨ë“œ ì¼œê¸°";
                btn.classList.remove('bg-brand', 'text-white');
                text.innerHTML = 'ì „í†µì  ë°©ì‹: ê¸°íš~í¸ì§‘ 4ì‹œê°„ ì†Œìš”';
            }
            isEfficiencyMode = !isEfficiencyMode;
        }

        // --- Lecture Page Interactive Scripts ---
        const toolData = {
            claude: {
                title: "Claude (í´ë¡œë“œ)",
                role: "Brain (ì„œë¸Œ ì‘ê°€)",
                desc: "ë‹¨ìˆœ ìš”ì²­ì´ ì•„ë‹Œ, êµ¬ì²´ì ì¸ ì§€ì¹¨ì„œ(í˜ë¥´ì†Œë‚˜)ë¥¼ ë¶€ì—¬í•˜ì—¬ ì¸ê°„ì ì¸ ê¸€ì“°ê¸°, ê¸°íš, ë¶„ì„ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ëŒ€ë³¸ ë¶„ì„ ë° ì§€ì¹¨ì„œ ì œì‘ì— íƒì›”í•©ë‹ˆë‹¤.",
                strategy: "ê¸°ìŠ¹ì „ê²° êµ¬ì¡°, í›„í‚¹ ìš”ì†Œ, ë§íˆ¬ íŠ¹ì§• ë“±ì„ ë¶„ì„í•˜ì—¬ 'ë‚˜ë§Œì˜ ì§€ì¹¨ì„œ'ë¥¼ ë§Œë“œëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.",
                tip: "ğŸ’¡ Tip: 'ë¶„ì„í•´ì¤˜' -> 'ì§€ì¹¨ì„œ ë§Œë“¤ì–´ì¤˜' 2ë‹¨ê³„ë¥¼ ê±°ì¹˜ì„¸ìš”."
            },
            opal: {
                title: "Opal (ì˜¤íŒ”)",
                role: "Structure (êµ¬ì¡°í™”)",
                desc: "ì €ë¹„ìš© ê³ íš¨ìœ¨ í•µì‹¬ íˆ´. ëŒ€ë³¸ì„ ë„£ìœ¼ë©´ [ì´ë¯¸ì§€ + ìŠ¤í¬ë¦½íŠ¸ + í–‰ë™ ì§€ë¬¸]ì´ í¬í•¨ëœ ìŠ¤í† ë¦¬ë³´ë“œë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤.",
                strategy: "ì˜¤íŒ”ë¡œ ê°€ì„±ë¹„ ìˆê²Œ ì‹œë“œë¨¸ë‹ˆë¥¼ ë§Œë“  í›„, ê³ ë¹„ìš© íˆ´ë¡œ ë„˜ì–´ê°€ëŠ” ê²ƒì´ ì „ëµì…ë‹ˆë‹¤.",
                tip: "ğŸ’¡ Tip: ëª¨ë°”ì¼ ìµœì í™” ë° ëŒ€ëŸ‰ ìƒì‚° ê°€ëŠ¥. ì‹¤ì‚¬ëŠ” ìŠ¤ì¼€ì¹˜í˜•ìœ¼ë¡œ ë½‘ê³  ë³€í™˜í•˜ì„¸ìš”."
            },
            genspark: {
                title: "Genspark (ì  ìŠ¤íŒŒí¬)",
                role: "Quality (ì˜¬ì¸ì›)",
                desc: "ê³ í’ˆì§ˆ ì˜ìƒ/ì´ë¯¸ì§€ ìƒì„± ë° íŒ©íŠ¸ ì²´í¬ê°€ ê°€ëŠ¥í•œ ì˜¬ì¸ì› íˆ´ì…ë‹ˆë‹¤. ë¹„ìš©ì´ ë†’ìŠµë‹ˆë‹¤.",
                strategy: "ìˆ˜ìµí™” ì´í›„ í™•ì¥ ë‹¨ê³„ì—ì„œ ì‚¬ìš©í•˜ê±°ë‚˜, AI ë“œë¼ì´ë¸Œ ê¸°ëŠ¥ì„ í™œìš©í•´ í€„ë¦¬í‹°ë¥¼ ë†’ì¼ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.",
                tip: "ğŸ’¡ Tip: ì´ˆê¸° ì§„ì…ì¥ë²½ì´ ë†’ìœ¼ë¯€ë¡œ ë‚˜ì¤‘ì— ë„ì…í•˜ì„¸ìš”."
            },
            groq: {
                title: "Groq (ê·¸ë¡)",
                role: "Visualization (ì˜ìƒí™”)",
                desc: "ì˜¤íŒ”ì—ì„œ ìƒì„±í•œ ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì˜ìƒì„ ìƒì„±í•´ì£¼ëŠ” íˆ´ì…ë‹ˆë‹¤.",
                strategy: "ì˜¤íŒ”ê³¼ ì—°ë™í•˜ì—¬ ìŠ¤í† ë¦¬ë³´ë“œë¥¼ ì‹¤ì œ ì›€ì§ì´ëŠ” ì˜ìƒìœ¼ë¡œ ë¹ ë¥´ê²Œ ì‹œê°í™”í•©ë‹ˆë‹¤.",
                tip: "ğŸ’¡ Tip: ì˜¤íŒ”ì—ì„œ ì œê³µí•œ í–‰ë™ ì§€ë¬¸ì„ ê·¸ëŒ€ë¡œ ì…ë ¥í•˜ì„¸ìš”."
            }
        };

        const workflowSteps = {
            1: {
                title: "STEP 1: ê¸°íš ë° ëŒ€ë³¸ ë¶„ì„",
                tool: "Tool: Claude",
                actions: [
                    "âœ… ì„±ê³µí•œ ì±„ë„(ì˜ˆ: ì–µë§Œì¥ì ìŠ¤í† ë¦¬) ë²¤ì¹˜ë§ˆí‚¹",
                    "âœ… 'í”½ì…€ë§' ë“±ìœ¼ë¡œ ìë§‰ ë°ì´í„° ì¶”ì¶œ",
                    "âœ… Claudeì—ê²Œ ê¸°ìŠ¹ì „ê²°, í›„í‚¹, ê°ì •ì„  ë¶„ì„ ìš”ì²­",
                    "âœ… <strong>ë‚˜ë§Œì˜ ì§€ì¹¨ì„œ(í”„ë¡¬í”„íŠ¸) ì œì‘</strong>"
                ],
                tips: "\"ì´ ë¶„ì„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ì•ìœ¼ë¡œ ì´ëŸ° ìŠ¤íƒ€ì¼ì˜ ê¸€ì„ ì¨ì£¼ëŠ” AI ì„œë¸Œ ì‘ê°€ ì§€ì¹¨ì„œë¥¼ ë§Œë“¤ì–´ì¤˜\"ë¼ê³  ìš”ì²­í•˜ì—¬ ë‚˜ë§Œì˜ ë„êµ¬ë¥¼ ë§Œë“œì„¸ìš”."
            },
            2: {
                title: "STEP 2: ìŠ¤í† ë¦¬ë³´ë“œ ìƒì„±",
                tool: "Tool: Opal",
                actions: [
                    "âœ… Claudeê°€ ì‘ì„±í•œ ëŒ€ë³¸ì„ Opalì— ì…ë ¥",
                    "âœ… ê·¸ë¦¼ì²´ ì„ íƒ (ì¸ë¬¼í˜•, ìŠ¤ì¼€ì¹˜í˜• ë“±)",
                    "âœ… <strong>ìŠ¤í† ë¦¬ë³´ë“œ ìë™ ìƒì„±</strong> (ì´ë¯¸ì§€+ì§€ë¬¸)",
                    "âœ… ì—¬ëŸ¬ ì°½ì„ ë„ì›Œ ëŒ€ëŸ‰ ìƒì‚° (ìƒì‚°ì„± ê·¹ëŒ€í™”)"
                ],
                tips: "ì‹¤ì‚¬ ì¸ë¬¼ ìƒì„± ì‹œ ì´ˆìƒê¶Œ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'ìŠ¤ì¼€ì¹˜í˜•'ìœ¼ë¡œ ìƒì„± í›„ ë¯¹ìŠ¤ë³´ë“œ ë“±ì—ì„œ ì‹¤ì‚¬í™”í•˜ëŠ” ìš°íšŒ ì „ëµì„ ì‚¬ìš©í•˜ì„¸ìš”."
            },
            3: {
                title: "STEP 3: ì˜ìƒí™” ë° ìŒì„± ìƒì„±",
                tool: "Tool: Groq & Typecast",
                actions: [
                    "âœ… Opal ì´ë¯¸ì§€ë¥¼ Groqì— ë„£ì–´ ì˜ìƒ ë³€í™˜",
                    "âœ… Opal í–‰ë™ ì§€ë¬¸ì„ Groq í”„ë¡¬í”„íŠ¸ë¡œ ì…ë ¥",
                    "âœ… Typecastë¡œ ê³ í’ˆì§ˆ AI ìŒì„± ìƒì„±",
                    "âœ… ì†ë„ ì¡°ì ˆ (ê°ë™ 1.1ë°°ì†, ì •ë³´ 1.2ë°°ì†)"
                ],
                tips: "AIê°€ ì˜ìƒì„ ìƒì„±í•˜ëŠ” ë™ì•ˆ ë©í•˜ë‹ˆ ê¸°ë‹¤ë¦¬ì§€ ë§ˆì„¸ìš”(í´ë© ê¸ˆì§€). ì´ ì‹œê°„ì— ìŒì„± íŒŒì¼ì„ ë§Œë“¤ê±°ë‚˜ ë‹¤ìŒ ëŒ€ë³¸ì„ ì¤€ë¹„í•˜ì„¸ìš”."
            },
            4: {
                title: "STEP 4: í¸ì§‘ ë° ë””í…Œì¼",
                tool: "Tool: CapCut",
                actions: [
                    "âœ… ì˜ìƒ ì†ŒìŠ¤ì™€ ìŒì„± íŒŒì¼ ë°°ì¹˜",
                    "âœ… ìë§‰(SRT) íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° ë° ì‹±í¬ ì¡°ì ˆ",
                    "âœ… í°íŠ¸(ë„ì—°ì²´) ë° ê°€ë…ì„± ë””ìì¸ ì ìš©",
                    "âœ… <strong>í‚¤í”„ë ˆì„</strong>ìœ¼ë¡œ ì¹´ë©”ë¼ ë¬´ë¹™ íš¨ê³¼ ì¶”ê°€"
                ],
                tips: "AIê°€ ë§Œë“  ì˜ìƒì— ì˜¤ë¥˜ê°€ ìˆë‹¤ë©´ ìˆ˜ì •í•˜ë ¤ ì• ì“°ì§€ ë§ê³ , ë¹„ìŠ·í•œ ì´ë¯¸ì§€ë¡œ ë‹¤ì‹œ ìƒì„±í•˜ê±°ë‚˜ í•´ë‹¹ ì»·ì„ ì˜ë¼ë‚´ëŠ” ê²ƒì´ ë¹ ë¦…ë‹ˆë‹¤."
            }
        };

        function updateToolDetail(toolKey) {
            const data = toolData[toolKey];
            const titleEl = document.getElementById('detail-title');
            if (!titleEl) return;

            titleEl.innerText = data.title;
            document.getElementById('detail-desc').innerHTML = data.desc;
            document.getElementById('detail-strategy').innerText = data.strategy;
            document.getElementById('detail-tip').innerText = data.tip;
        }

        function showWorkflowStep(stepNum) {
            const data = workflowSteps[stepNum];
            const titleEl = document.getElementById('wf-title');
            if (!titleEl) return;

            titleEl.innerText = data.title;
            document.getElementById('wf-tool').innerText = data.tool;

            const actionsList = document.getElementById('wf-actions');
            actionsList.innerHTML = '';
            data.actions.forEach(action => {
                const li = document.createElement('li');
                li.innerHTML = action;
                actionsList.appendChild(li);
            });

            document.getElementById('wf-tips').innerText = data.tips;

            // Visual feedback for stepper
            document.querySelectorAll('.step-card').forEach((card, index) => {
                if (index + 1 === stepNum) {
                    card.classList.add('border-indigo-500', 'ring-2', 'ring-indigo-100', 'dark:ring-indigo-900');
                    card.classList.remove('border-gray-100', 'dark:border-gray-700');
                } else {
                    card.classList.remove('border-indigo-500', 'ring-2', 'ring-indigo-100', 'dark:ring-indigo-900');
                    card.classList.add('border-gray-100', 'dark:border-gray-700');
                }
            });
        }

        function initLectureScripts() {
            console.log("Initializing Lecture Scripts");

            // 1. Radar Chart
            const ctx = document.getElementById('toolRadarChart');
            if (ctx) {
                // Destroy old instance if exists to prevent layering (though simpler here to just create new if null)
                // Since page reloads chart usually, it's fine.

                const isDark = document.documentElement.classList.contains('dark');
                const textColor = isDark ? '#f1f5f9' : '#1f2937';
                const gridColor = isDark ? '#334155' : '#e5e7eb';
                const backdropColor = isDark ? 'rgba(30, 41, 59, 0.8)' : 'rgba(255, 255, 255, 0.8)';

                new Chart(ctx.getContext('2d'), {
                    type: 'radar',
                    data: {
                        labels: ['ë¹„ìš© íš¨ìœ¨ì„±', 'ì œì‘ ì†ë„', 'í€„ë¦¬í‹°', 'ì´ˆë³´ì ì ‘ê·¼ì„±', 'ììœ¨ì„±'],
                        datasets: [
                            {
                                label: 'Opal (ì˜¤íŒ”)',
                                data: [90, 85, 70, 90, 60],
                                fill: true,
                                backgroundColor: 'rgba(99, 102, 241, 0.2)', // Indigo
                                borderColor: '#6366f1',
                                pointBackgroundColor: '#6366f1',
                                pointBorderColor: '#fff',
                            },
                            {
                                label: 'Genspark',
                                data: [40, 70, 95, 60, 80],
                                fill: true,
                                backgroundColor: 'rgba(244, 63, 94, 0.2)', // Rose
                                borderColor: '#f43f5e',
                                pointBackgroundColor: '#f43f5e',
                                pointBorderColor: '#fff',
                            }
                        ]
                    },
                    options: {
                        maintainAspectRatio: false,
                        responsive: true,
                        elements: {
                            line: { borderWidth: 3 }
                        },
                        scales: {
                            r: {
                                grid: { color: gridColor },
                                angleLines: { color: gridColor },
                                pointLabels: { color: textColor, font: { size: 12 } },
                                ticks: { display: false, backdropColor: backdropColor },
                                suggestedMin: 0,
                                suggestedMax: 100
                            }
                        },
                        plugins: {
                            legend: { labels: { color: textColor } }
                        }
                    }
                });
            }

            // 2. Initialize Workflow
            showWorkflowStep(1);
        }
    </script>
</body>

</html>